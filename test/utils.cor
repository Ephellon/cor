
func fileCompiler(path) {
    return func() {
        return compile(file(path))
    }
}

func file(path) {
    if! (window?) { path = __dirname + '/' + path }
    return cor.loader.readFile(path)
}

func compile(src) {
    return cor.compile(src)
}

func run() {
    return cor.run.apply(cor, arguments)
}

func testWithPromise(test) {
    if CRL.Promise == Promise {
        test('(CRL Promise. This platform don\'t support native promises)', CRL.Promise);
    } else {
        test('(CRL Promise)', CRL.Promise);
        test('(Native Promise)', Promise);
    }
}
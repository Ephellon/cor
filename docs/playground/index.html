<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" type="text/css" href="../assets/style.css">
        <link rel="shortcut icon" href="../assets/favicon.ico" />
        <script type="text/javascript" src="../../dist/cor.js"></script>
        <script data-entry="./playground.cor"></script>
        <title>Cor - Playground</title>
    </head>
    <body>
    <span id="top"></span>

    <nav class="navbar" role="navigation">
        <div class="nav content">
            <ul class="left">
                <li class="inline"><a href="../../index.html">Cor</a></li>
                <li class="inline"><a href="../get_started.html">Get started</a></li>
                <li class="inline"><a href="../documentation.html">Documentation</a></li>
                <li class="inline"><a href="index.html">Playground</a></li>
                <li class="inline"><a href="../../test/index.html">Run tests</a></li>
            </ul>
            <ul class="right">
                <li class="inline"><a class="icon-twitter" href="http://twitter.com/yosbelms" target="_blank"></a></li>
                <li class="inline"><a class="icon-github" href="https://github.com/yosbelms/cor" target="_blank"></a></li>
            </ul>
        </div>
    </nav>

    <div class="body pg-content">
    
    <p><h1 style="display: inline;">Playground </h1><small>it is a living Cor example, you can find the source code <a href="https://github.com/yosbelms/cor/blob/master/docs/playground">here</a></small></p>
    <br />
    Start with
    <select id="sample-select">
        <option name="play-hello">Hello !</option>
        <option name="play-dom">DOM</option>
        <option name="play-class">Classes</option>
        <option name="play-fib">Fibonacci</option>
        <option name="play-list">Linked list</option>
    </select>

    <div class="pg-toolbar">
        <a class="pg-btn-run"  href="javascript:void 0" id="btn-run">Run</a>
        <a class="pg-btn-link" href="javascript:void 0" id="btn-link">Link</a>
    </div>
    
    <ul class="pg-editor">
        <li class="inline">
            <textarea class="pg-source" id="source" spellcheck="false"></textarea>
        </li>
        <li class="inline">
            <textarea class="pg-output" id="output" spellcheck="false"></textarea>
        </li>
    </ul>

<script id="play-hello" type="text/cor">
func init() {
    alert('Hello World !')
}
</script>

<script id="play-fib" type="text/cor">// fib() returns a function which generates
// succesive fibonacci numbers

func fib(n) {
    a = 0
    b = 1
    return func() {
        f = a + b
        a = b
        return b = f
    }
}

func init() {
    gen = fib()
    res = (,)
    for f in 0:10 {
        res.push(gen())
    }
    alert(res)
}
</script>
<script id="play-list" type="text/cor">// simple linked list

class Node {
    data
    next
}

class List {
    head
}

func iterate(list) {
    node = list.head
    return func() {
        ret = node
        if node { node = node.next }
        return ret
    }
}

func size(ls) {
    iter  = iterate(ls)
    count = 0
    for i = iter() { count++ }
    return count
}

func fromArray(arr) {
    ls = current = &List
    for item in arr {
        node = &Node(item)
        switch current.constructor {
            case List : current.head = node
            case Node : current.next = node
        }
        current = node
    }
    return ls
}

func toArray(ls) {
    iter = iterate(ls)
    ret  = (,)
    for i = iter() { ret.push(i.data) }
    return ret
}


func init() {
    ls = fromArray(('horse', 'snake', 'cat'))
    alert('size:  ' + size(ls) + '\ndata: ' + toArray(ls))
}
</script>
<script id="play-class" type="text/cor">// Show inheritance and literal object contructions

idSeed = 0
func genId() {
    idSeed++
    return 'id-' + idSeed
}

class Model {
    id = genId()
    func toJSON() (id: me.id)
}

class Todo : Model {
    desc    
    func toJSON() {
        obj      = super()
        obj.desc = me.desc
        obj.type = 'Todo'
        return obj
    }
}


func init() {
    ls = (
        &Todo('Buy a battery'),
        &Todo('Clean the fan'),
        &Todo('Make a push'),
    )
    alert(JSON.stringify(ls, 0, 4))
}
</script>

<script id="play-dom" type="text/cor">// move [Run] and [Link] buttons to the right
// and put it back after a second

class View {
    elem
    func move()    me.elem.style.marginLeft = '50px'
    func restore() me.elem.style.marginLeft = '0px'
}

func init() {
    view = &View(elem: document.getElementById('btn-run'))
    view.move()
    setTimeout(func() view.restore(), 1000)
}
</script>

    
    <div class="rule"></div>    
    <div class="rule"></div>

    <div id="footer" class="feature footer-links">
        <ul>
            <li><a href="https://github.com/yosbelms/cor">GitHub Repository</a></li>
            <li>&middot;</li>
            <li><a href="http://ost.io/@yosbelms/cor">Discussions</a></li>
            <li>&middot;</li>
            <li><a href="https://github.com/yosbelms/cor/issues">Issues</a></li>
            <li>&middot;</li>
            <li><a href="https://github.com/yosbelms/cor/contributors">Contributors</a></li>
        </ul>
    </div>
        
    </div>
    
    <div class="feature footer">
            <p>Designed, written, and built with love by <a href="https://github.com/yosbelms" target="_blank">Yosbel Mar√≠n</a>. Code licensed under <a href="https://github.com/yosbelms/cor/blob/master/LICENSE" target="_blank">BSD</a>, documentation under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.</p>
    </div>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-73271106-1', 'auto');
      ga('send', 'pageview');

    </script>
    
    </body>
</html>
